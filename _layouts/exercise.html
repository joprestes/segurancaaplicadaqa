---
layout: default
---

{% comment %}
  Construir lesson_url se não estiver definido no front matter
{% endcomment %}
{% if page.lesson_url %}
  {% assign exercise_lesson_url = page.lesson_url %}
{% else %}
  {% assign current_lesson = site.data.lessons.lessons | where: "id", page.lesson_id | first %}
  {% assign current_module = site.data.modules.modules | where: "id", page.module | first %}
  {% if current_lesson and current_module %}
    {% assign exercise_lesson_url = '/modules/' | append: current_module.slug | append: '/lessons/' | append: current_lesson.slug | append: '/' %}
  {% else %}
    {% assign exercise_lesson_url = '/' %}
  {% endif %}
{% endif %}

{% if page.video %}
<div class="video-player-container">
  {% include video-player.html
  video=page.video
  lesson_id=page.lesson_id %}
</div>
{% endif %}

<article class="exercise-content">
  <header>
    <h1>{{ page.title }}</h1>
    <div class="exercise-meta">
      {% if page.difficulty %}
        <span>Dificuldade: {{ page.difficulty }}</span>
      {% endif %}
      {% if page.duration %}
        <span>Duração: {{ page.duration }}</span>
      {% endif %}
    </div>
  </header>
  
  {{ content }}
</article>

<nav class="exercise-navigation">
  <a href="{{ exercise_lesson_url | relative_url }}" data-testid="exercise-back-to-lesson-link">← Voltar para a aula</a>
</nav>

<!-- Scripts para formulário de submissão -->
<script src="{{ '/assets/js/emailjs-config.js' | relative_url }}"></script>
<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>

{% if page.video %}
<script src="{{ '/assets/js/video-player.js' | relative_url }}"></script>
{% endif %}

