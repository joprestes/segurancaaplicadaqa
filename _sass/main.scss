@import 'variables';
@import 'colors';
@import 'theme';
@import 'navigation';
@import 'video-player';
@import 'progress-tracker';
@import 'breadcrumbs';
@import 'module-summary';
@import 'quiz';
@import 'exercise-submission';
@import 'components/interactions';
@import 'components/skeleton';
@import 'components/empty-states';
@import 'components/hero';
@import 'components/command-palette';
@import 'components/toast';
@import 'components/footer';
@import 'utilities/transitions';
@import 'utilities/utilities';
@import 'animations/keyframes';

* {
  box-sizing: border-box;
}

.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  clip-path: inset(50%);
  border: 0;
  white-space: nowrap;
}

/* Garantir que pre tags sempre usem as cores corretas do tema */
// NOTA: !important necessário para sobrescrever syntax highlighting do tema Jekyll Minima
pre {
  background: var(--color-code-block-bg) !important; // Necessário para sobrescrever tema
  color: var(--color-text-primary) !important; // Necessário para sobrescrever tema
  border: 1px solid var(--color-code-block-border) !important; // Necessário para sobrescrever tema
  border-radius: 8px !important; // Necessário para sobrescrever tema
  overflow: hidden !important; // Necessário para sobrescrever tema

  code {
    background: transparent !important;
    color: var(--color-text-primary) !important;
  }

  /* Remover todos os backgrounds de elementos de syntax highlighting */
  * {
    background: transparent !important;
    background-color: transparent !important;
  }

  span,
  .hll,
  .err,
  .k,
  .o,
  .c,
  .cm,
  .cp,
  .c1,
  .cs,
  .gd,
  .ge,
  .gr,
  .gh,
  .gi,
  .go,
  .gp,
  .gs,
  .gu,
  .gt,
  .kc,
  .kd,
  .kn,
  .kp,
  .kr,
  .kt,
  .ld,
  .m,
  .s,
  .na,
  .nb,
  .nc,
  .no,
  .nd,
  .ni,
  .ne,
  .nf,
  .nl,
  .nn,
  .nx,
  .py,
  .nt,
  .nv,
  .ow,
  .w,
  .mb,
  .mf,
  .mh,
  .mi,
  .mo,
  .sa,
  .sb,
  .sc,
  .dl,
  .sd,
  .s2,
  .se,
  .sh,
  .si,
  .sx,
  .sr,
  .s1,
  .ss,
  .bp,
  .fm,
  .vc,
  .vg,
  .vi,
  .vm,
  .il {
    background: transparent !important;
    background-color: transparent !important;
  }
}

/* Remover backgrounds do highlighter-rouge do Minima */
// NOTA: !important necessário para sobrescrever tema Jekyll Minima
.highlighter-rouge {
  background: transparent !important; // Necessário para sobrescrever tema

  .highlight {
    background: transparent !important;
    background-color: transparent !important;
  }

  .highlight pre,
  pre {
    background: var(--color-code-block-bg) !important;
    background-color: var(--color-code-block-bg) !important;
  }

  .highlight *,
  .highlight pre * {
    background: transparent !important;
    background-color: transparent !important;
  }
}

body {
  font-family: $font-family;
  font-size: $font-size-base;
  font-weight: $font-weight-normal;
  line-height: $line-height-normal;
  color: var(--color-text-primary);
  background: var(--color-bg-primary);
  margin: 0;
  padding: 0;
  overflow-x: hidden;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
  @include theme-transition-all;

  // Gradiente sutil no background (estilo CWI)
  background: linear-gradient(180deg,
      var(--color-bg-primary) 0%,
      var(--color-bg-secondary) 100%);
  min-height: 100vh;
}

/* Hierarquia tipográfica - Títulos */
h1,
h2,
h3,
h4,
h5,
h6 {
  font-family: $font-family;
  font-weight: $font-weight-semibold;
  line-height: $line-height-tight;
  color: var(--color-text-primary);
  margin-top: 0;
  margin-bottom: $spacing-md;
  @include theme-transition(color);
}

h1 {
  font-size: $font-size-h1;
  font-weight: $font-weight-bold;
  line-height: $line-height-tight;
  margin-bottom: $spacing-lg;
  letter-spacing: -0.02em;
}

h2 {
  font-size: $font-size-h2;
  font-weight: $font-weight-semibold;
  line-height: $line-height-tight;
  margin-bottom: $spacing-md;
  margin-top: $spacing-xl;
  letter-spacing: -0.01em;
}

h3 {
  font-size: $font-size-h3;
  font-weight: $font-weight-semibold;
  line-height: $line-height-tight;
  margin-bottom: $spacing-md;
  margin-top: $spacing-lg;
}

h4 {
  font-size: $font-size-h4;
  font-weight: $font-weight-semibold;
  line-height: $line-height-normal;
  margin-bottom: $spacing-sm;
  margin-top: $spacing-lg;
}

h5 {
  font-size: $font-size-h5;
  font-weight: $font-weight-medium;
  line-height: $line-height-normal;
  margin-bottom: $spacing-sm;
  margin-top: $spacing-md;
}

h6 {
  font-size: $font-size-h6;
  font-weight: $font-weight-medium;
  line-height: $line-height-normal;
  margin-bottom: $spacing-sm;
  margin-top: $spacing-md;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  font-size: $font-size-small;
}

.site-header {
  background: var(--color-secondary);
  color: var(--color-primary);
  padding: $spacing-md $spacing-lg;
  box-shadow: var(--color-shadow-sm);
  position: sticky;
  top: 0;
  z-index: z(header); // 200 - sistema profissional
  @include theme-transition-all;

  /* Dark mode: usar cinza mais escuro */
  [data-theme="dark"] & {
    background: var(--color-secondary);
  }

  .header-content {
    max-width: $container-max-width;
    margin: 0 auto;
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: $spacing-lg;
  }

  .header-brand {
    display: flex;
    align-items: center;
    min-height: 64px;
    height: 64px;
  }

  .site-title {
    margin: 0;
    font-size: 0;
    height: 100%;

    .brand-logo {
      display: inline-flex;
      align-items: center;
      justify-content: flex-start;
      height: 100%;
      text-decoration: none;
      color: var(--color-primary);
      transition: opacity 0.2s ease;
      gap: $spacing-md;

      &:hover {
        opacity: 0.9;
      }
    }

    .brand-logo-image {
      height: calc(100% - 4px);
      max-height: 60px;
      width: auto;
      display: block;
      object-fit: contain;
    }

    .logo-placeholder {
      min-width: 150px;
      min-height: 48px;
      border-radius: 14px;
      border: 2px dashed var(--color-primary);
      background: var(--color-primary-light);
      color: var(--color-primary);
      letter-spacing: 0.08em;
      text-transform: uppercase;
      font-size: 0.85rem;
      font-weight: $font-weight-semibold;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 0 $spacing-lg;
    }

    .brand-text {
      font-size: clamp(1.25rem, 2vw, 1.75rem);
      font-weight: $font-weight-semibold;
      letter-spacing: -0.01em;
      color: var(--color-primary);
      white-space: nowrap;
    }
  }

  .main-nav {
    display: flex;
    gap: $spacing-lg;
    align-items: center;

    a {
      color: var(--color-primary);
      text-decoration: none;

      &:hover {
        text-decoration: underline;
        color: var(--color-primary-hover);
      }
    }
  }

  .theme-toggle {
    background: transparent;
    border: none;
    color: var(--color-primary);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    padding: $spacing-xs;
    margin-left: $spacing-md;
    transition: opacity 0.2s, transform 0.2s, color 0.2s;

    &:hover {
      opacity: 0.8;
      transform: scale(1.1);
      color: var(--color-primary-hover);
    }

    &:active {
      transform: scale(0.95);
    }

    &:focus {
      outline: 2px solid var(--color-primary);
      outline-offset: 2px;
      border-radius: 4px;
    }

    #theme-icon {
      display: inline-block;
      line-height: 1;
    }
  }
}

// Layout principal - !important necessário para sobrescrever tema Jekyll Minima
// NOTA: Estes !important são necessários devido a conflitos com o tema Jekyll
// Testar se funciona sem !important e adicionar de volta se layout quebrar
.page-wrapper {
  display: flex !important; // Necessário para sobrescrever tema Jekyll
  flex-direction: row !important; // Necessário para sobrescrever tema Jekyll
  align-items: flex-start !important; // Necessário para sobrescrever tema Jekyll
  width: 100% !important; // Necessário para sobrescrever tema Jekyll
  min-height: calc(100vh - 80px);
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

.sidebar {
  flex: 0 0 $sidebar-width !important; // Necessário para sobrescrever tema Jekyll
  width: $sidebar-width !important; // Necessário para sobrescrever tema Jekyll
  min-width: $sidebar-width !important; // Necessário para sobrescrever tema Jekyll
  max-width: $sidebar-width !important; // Necessário para sobrescrever tema Jekyll
  position: sticky !important; // Necessário para sobrescrever tema Jekyll
  top: 80px;
  height: calc(100vh - 80px);
  overflow-y: auto;
  overflow-x: hidden;
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

.main-container {
  flex: 1 1 auto !important; // Necessário para sobrescrever tema Jekyll
  display: flex !important; // Necessário para sobrescrever tema Jekyll
  justify-content: center !important; // Necessário para sobrescrever tema Jekyll
  align-items: flex-start !important; // Necessário para sobrescrever tema Jekyll
  min-width: 0;
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

.main-container .content {
  max-width: $container-max-width;
  width: 100%;
  padding: $spacing-lg;
  box-sizing: border-box;

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    color: var(--color-text-primary);
    @include theme-transition(color);
  }

  p {
    color: var(--color-text-primary);
    font-size: $font-size-base;
    line-height: $line-height-relaxed;
    margin-bottom: $spacing-md;
    @include theme-transition(color);
  }

  /* Textos grandes e pequenos */
  .text-large {
    font-size: $font-size-large;
    line-height: $line-height-relaxed;
  }

  .text-small {
    font-size: $font-size-small;
    line-height: $line-height-normal;
  }

  .text-xs {
    font-size: $font-size-xs;
    line-height: $line-height-normal;
  }

  /* Pesos de fonte */
  .font-light {
    font-weight: $font-weight-light;
  }

  .font-normal {
    font-weight: $font-weight-normal;
  }

  .font-medium {
    font-weight: $font-weight-medium;
  }

  .font-semibold {
    font-weight: $font-weight-semibold;
  }

  .font-bold {
    font-weight: $font-weight-bold;
  }

  a {
    color: var(--color-primary);
    @include theme-transition(color);

    &:hover {
      color: var(--color-primary-hover);
    }
  }

  code {
    background: var(--color-code-bg);
    color: var(--color-code-text);
    padding: 0.2em 0.4em;
    border-radius: 3px;
    font-size: 0.9em;
    font-family: $font-family-mono;
    font-weight: $font-weight-normal;
    @include theme-transition-all;
  }

  /* Estilos para containers de highlight do Jekyll/Minima */
  .highlighter-rouge {
    background: transparent !important;

    .highlight {
      background: transparent !important;
      background-color: transparent !important;
    }
  }

  pre {
    background: var(--color-code-block-bg) !important;
    color: var(--color-text-primary) !important;
    padding: $spacing-md;
    border-radius: 8px;
    overflow: hidden;
    overflow-x: auto;
    border: 1px solid var(--color-code-block-border) !important;
    margin: $spacing-lg 0;
    @include theme-transition-all;

    code {
      background: transparent !important;
      color: var(--color-text-primary) !important;
      padding: 0;
      font-size: 0.9em;
      font-family: $font-family-mono;
      font-weight: $font-weight-normal;
      border: none;
      display: block;
      line-height: $line-height-relaxed;
    }

    /* Remover todos os backgrounds de elementos de syntax highlighting */
    * {
      background: transparent !important;
      background-color: transparent !important;
    }

    /* Garantir que spans de highlight não tenham background */
    span,
    .hll,
    .err,
    .k,
    .o,
    .c,
    .cm,
    .cp,
    .c1,
    .cs,
    .gd,
    .ge,
    .gr,
    .gh,
    .gi,
    .go,
    .gp,
    .gs,
    .gu,
    .gt,
    .kc,
    .kd,
    .kn,
    .kp,
    .kr,
    .kt,
    .ld,
    .m,
    .s,
    .na,
    .nb,
    .nc,
    .no,
    .nd,
    .ni,
    .ne,
    .nf,
    .nl,
    .nn,
    .nx,
    .py,
    .nt,
    .nv,
    .ow,
    .w,
    .mb,
    .mf,
    .mh,
    .mi,
    .mo,
    .sa,
    .sb,
    .sc,
    .dl,
    .sd,
    .s2,
    .se,
    .sh,
    .si,
    .sx,
    .sr,
    .s1,
    .ss,
    .bp,
    .fm,
    .vc,
    .vg,
    .vi,
    .vm,
    .il {
      background: transparent !important;
      background-color: transparent !important;
      color: inherit;
    }
  }

  /* Garantir que .highlight dentro de .highlighter-rouge não tenha background */
  .highlighter-rouge .highlight,
  .highlighter-rouge .highlight pre,
  .highlighter-rouge pre {
    background: var(--color-code-block-bg) !important;
    background-color: var(--color-code-block-bg) !important;
  }

  .highlighter-rouge .highlight *,
  .highlighter-rouge .highlight pre * {
    background: transparent !important;
    background-color: transparent !important;
  }

  /* Garantir que pre dentro de qualquer contexto use as cores corretas */
  .lesson-content pre,
  .module-content pre,
  .exercise-content pre,
  .content pre {
    background: var(--color-code-block-bg) !important;
    color: var(--color-text-primary) !important;
    border-color: var(--color-code-block-border) !important;
  }

  blockquote {
    border-left: 4px solid var(--color-primary);
    padding-left: $spacing-md;
    margin-left: 0;
    margin-right: 0;
    color: var(--color-text-secondary);
    background: var(--color-bg-secondary);
    padding-top: $spacing-sm;
    padding-bottom: $spacing-sm;
    padding-right: $spacing-md;
    border-radius: 0 4px 4px 0;
    @include theme-transition-all;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    margin: $spacing-lg 0;

    th,
    td {
      padding: $spacing-sm $spacing-md;
      border: 1px solid var(--color-border);
      @include theme-transition(border-color);
    }

    th {
      background: var(--color-bg-secondary);
      color: var(--color-text-primary);
      font-weight: 600;
      @include theme-transition-all;
    }

    td {
      background: var(--color-surface);
      color: var(--color-text-primary);
      @include theme-transition-all;
    }

    tr:nth-child(even) td {
      background: var(--color-bg-secondary);
    }
  }

  ul,
  ol {
    color: var(--color-text-primary);
    @include theme-transition(color);
  }

  hr {
    border: none;
    border-top: 1px solid var(--color-border);
    margin: $spacing-xl 0;
    @include theme-transition(border-color);
  }

  img {
    max-width: 100%;
    height: auto;
    border-radius: 4px;
    @include theme-transition-all;

    &[src*="visualizacao"],
    &[src*="visualization"],
    &[src*="diagram"],
    &[src*="diagrama"] {
      background: var(--color-surface);
      padding: $spacing-md;
      border: 1px solid var(--color-border);
      @include theme-transition-all;
    }
  }

  /* Containers de visualização e diagramas */
  .visualizacao,
  .visualization,
  .diagram,
  .diagrama {
    background: var(--color-visualization-bg);
    border: 1px solid var(--color-visualization-border);
    border-radius: 8px;
    padding: $spacing-lg;
    margin: $spacing-lg 0;
    color: var(--color-text-primary);
    @include theme-transition-all;

    img {
      background: transparent;
      border: none;
      padding: 0;
    }

    p,
    div,
    span {
      color: var(--color-text-primary);
    }
  }

  /* Seções com conteúdo que pode ter imagens brancas */
  section,
  div[class*="visual"],
  div[class*="diagram"] {
    img {

      /* Aplicar filtro sutil no dark mode para melhorar contraste */
      [data-theme="dark"] & {
        opacity: 0.9;
      }
    }
  }
}

.lesson-content,
.module-content,
.exercise-content {
  background: linear-gradient(135deg, var(--color-surface) 0%, rgba(var(--color-primary-rgb, 74, 144, 226), 0.02) 100%);
  color: var(--color-text-primary);
  padding: 0;
  border-radius: 20px;
  box-shadow:
    0 10px 40px rgba(0, 0, 0, 0.08),
    0 4px 16px rgba(0, 0, 0, 0.04),
    inset 0 1px 0 rgba(255, 255, 255, 0.5);
  /* overflow: hidden; REMOVIDO para evitar corte de conteúdo */
  position: relative;
  margin-bottom: 4rem;
  /* Garante espaço do footer */
  @include theme-transition-all;

  // Barra gradiente no topo
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg,
        #4a90e2 0%,
        #5ca0f2 25%,
        #7eb4f6 50%,
        #5ca0f2 75%,
        #4a90e2 100%);
    background-size: 200% 100%;
    animation: shimmer 3s linear infinite;
    border-top-left-radius: 20px;
    border-top-right-radius: 20px;
    z-index: 2;
  }

  header {
    margin: 0;
    padding: 2.5rem 2.5rem 2rem;
    background: linear-gradient(135deg, rgba(74, 144, 226, 0.05) 0%, rgba(74, 144, 226, 0.02) 100%);
    border-bottom: none;
    position: relative;
    border-top-left-radius: 20px;
    border-top-right-radius: 20px;
    @include theme-transition(background);

    h1 {
      margin: 0 0 1.25rem 0;
      font-size: 2.5rem;
      font-weight: 700;
      background: linear-gradient(135deg, var(--color-text-primary) 0%, var(--color-primary) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      line-height: 1.2;
      @include theme-transition(color);
    }

    .lesson-meta,
    .module-meta,
    .exercise-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;

      span {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.5rem 1rem;
        background: linear-gradient(135deg, rgba(74, 144, 226, 0.1) 0%, rgba(74, 144, 226, 0.05) 100%);
        border: 1px solid rgba(74, 144, 226, 0.2);
        border-radius: 20px;
        color: var(--color-primary);
        font-size: 0.875rem;
        font-weight: 600;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        transition: all 0.2s ease;

        &:hover {
          transform: translateY(-1px);
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
      }
    }
  }

  // Conteúdo da aula com padding
  >*:not(header):not(.lesson-actions) {
    padding-left: 2.5rem;
    padding-right: 2.5rem;
  }

  > :first-child:not(header) {
    padding-top: 2rem;
  }

  > :last-child:not(.lesson-actions) {
    padding-bottom: 2.5rem;
  }
}

.lesson-navigation {
  margin: $spacing-xl 0;
  padding: $spacing-lg $spacing-lg;
  background: var(--color-bg-secondary);
  border-radius: 12px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
  box-sizing: border-box;
  min-height: 60px;
  @include theme-transition(background-color);

  a {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    color: var(--color-primary);
    text-decoration: none;
    font-weight: 600;
    font-size: 1rem;
    padding: 0.875rem 1.5rem;
    border-radius: 8px;
    background: var(--color-surface);
    border: 2px solid var(--color-primary);
    transition: all 0.2s ease;
    @include theme-transition(all);
    white-space: nowrap;
    flex-shrink: 0;
    min-width: fit-content;



    &:hover {
      text-decoration: none;
      background: var(--color-primary);
      color: var(--color-text-inverse);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    &:active {
      transform: translateY(0);
    }

    &:focus-visible {
      outline: 2px solid var(--color-primary);
      outline-offset: 2px;
      border-radius: 8px;
    }
  }

  // Quando há apenas o link de resumo do módulo, alinha à direita
  .module-summary-link:only-child {
    margin-left: auto;
    margin-right: 0;
  }

  // Quando há apenas um link, centralizar
  a:only-child {
    margin: 0 auto;
  }

  // Botão anterior - sempre à esquerda
  .prev-lesson {
    margin-left: 0;
    margin-right: auto;
    order: 1;
    text-align: left;
  }

  // Botão próximo - sempre à direita
  .next-lesson,
  .module-summary-link {
    margin-left: auto;
    margin-right: 0;
    order: 2;
    text-align: right;
    flex-shrink: 0;
  }
}

.exercises {
  margin-top: $spacing-xl;

  h2 {
    font-size: $font-size-h2;
    margin-bottom: $spacing-lg;
    color: var(--color-text-primary);
    @include theme-transition(color);
  }

  .exercise-card {
    background: var(--color-surface);
    color: var(--color-text-primary);
    padding: $spacing-lg;
    border: 1px solid var(--color-border);
    border-radius: 8px;
    margin-bottom: $spacing-md;
    @include theme-transition-all;

    h3 {
      margin: 0 0 $spacing-sm 0;
      font-size: $font-size-h3;
      color: var(--color-text-primary);
    }

    a {
      color: var(--color-primary);
      text-decoration: none;
      @include theme-transition(color);

      &:hover {
        text-decoration: underline;
      }
    }
  }
}

.lesson-actions {
  margin: 0;
  padding: 2.5rem;
  background: linear-gradient(135deg, rgba(74, 144, 226, 0.03) 0%, rgba(74, 144, 226, 0.01) 100%);
  border-top: none;
  @include theme-transition(background);

  .mark-lesson-complete {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.75rem;
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    color: white;
    border: none;
    padding: 1rem 2.5rem;
    border-radius: 12px;
    font-size: 1.0625rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    min-height: 54px;
    box-shadow:
      0 6px 20px rgba(16, 185, 129, 0.3),
      inset 0 -3px 6px rgba(0, 0, 0, 0.1);
    position: relative;
    overflow: hidden;

    &::before {
      content: '✓';
      margin-right: 0.5rem;
      font-size: 1.25rem;
      font-weight: bold;
      transition: transform 0.3s ease;
    }

    &::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.3);
      transform: translate(-50%, -50%);
      transition: width 0.6s, height 0.6s;
    }

    &:hover {
      transform: translateY(-3px);
      box-shadow:
        0 10px 30px rgba(16, 185, 129, 0.4),
        inset 0 -3px 6px rgba(0, 0, 0, 0.1);

      &::before {
        transform: scale(1.2) rotate(360deg);
      }
    }

    &:active::after {
      width: 300px;
      height: 300px;
    }

    &:disabled {
      background: linear-gradient(135deg, #9ca3af 0%, #6b7280 100%);
      cursor: not-allowed;
      transform: none;
      box-shadow: 0 4px 12px rgba(156, 163, 175, 0.2);

      &::before {
        content: '✓';
        transform: none;
      }
    }
  }
}

// Footer styles moved to components/_footer.scss

// Media query faltando - este bloco estava fora de media query (BUG CORRIGIDO)
@media (max-width: $breakpoint-tablet) {
  .page-wrapper {
    flex-direction: column;
  }

  .sidebar {
    width: 100%;
    position: relative;
    top: 0;
    height: auto;
    align-self: stretch;
  }

  .sidebar-navigation {
    height: auto;
  }

  .main-container {
    width: 100%;
  }

  .main-container .content {
    padding: $spacing-md;
  }

  .lesson-content,
  .module-content,
  .exercise-content {
    padding: $spacing-lg;
  }

  .site-header {
    .header-content {
      flex-direction: column;
      gap: $spacing-md;
    }

    .header-brand {
      flex-direction: column;
      align-items: flex-start;
      gap: $spacing-sm;
    }

    .brand-badge {
      align-self: flex-start;
    }
  }

  // Footer responsive styles moved to components/_footer.scss
}

@media (max-width: $breakpoint-mobile) {

  .lesson-content,
  .module-content,
  .exercise-content {
    header h1 {
      font-size: $font-size-h2;
    }
  }
}

// Correção para content-wrapper garantir fluxo normal
.content-wrapper {
  width: 100%;
  height: auto !important;
  min-height: 100%;
  overflow: visible !important;
  display: block;
  flex: 1 1 auto;
}

// Ensure content is visible and layout flows correctly
.lesson-content {
  display: block !important;
  opacity: 1 !important;
  visibility: visible !important;
  height: auto !important;
  overflow: visible !important;
  // Ensure it does not overlap with fixed headers if any
  position: relative !important;
  z-index: 10 !important; // Abaixo do header (200), mas visível
  clear: both;
}