---
---

@import "minima";

@import "variables";
@import "colors";
@import "theme";
@import "navigation";
@import "podcast-player";
@import "progress-tracker";
@import "breadcrumbs";

* {
  box-sizing: border-box;
}

/* Garantir que pre tags sempre usem as cores corretas do tema */
pre {
  background: var(--color-code-block-bg) !important;
  color: var(--color-text-primary) !important;
  border: 1px solid var(--color-code-block-border) !important;
  border-radius: 8px !important;
  overflow: hidden !important;
  
  code {
    background: transparent !important;
    color: var(--color-text-primary) !important;
  }
  
  /* Remover todos os backgrounds de elementos de syntax highlighting */
  * {
    background: transparent !important;
    background-color: transparent !important;
  }
  
  span,
  .hll,
  .err,
  .k,
  .o,
  .c,
  .cm,
  .cp,
  .c1,
  .cs,
  .gd,
  .ge,
  .gr,
  .gh,
  .gi,
  .go,
  .gp,
  .gs,
  .gu,
  .gt,
  .kc,
  .kd,
  .kn,
  .kp,
  .kr,
  .kt,
  .ld,
  .m,
  .s,
  .na,
  .nb,
  .nc,
  .no,
  .nd,
  .ni,
  .ne,
  .nf,
  .nl,
  .nn,
  .nx,
  .py,
  .nt,
  .nv,
  .ow,
  .w,
  .mb,
  .mf,
  .mh,
  .mi,
  .mo,
  .sa,
  .sb,
  .sc,
  .dl,
  .sd,
  .s2,
  .se,
  .sh,
  .si,
  .sx,
  .sr,
  .s1,
  .ss,
  .bp,
  .fm,
  .vc,
  .vg,
  .vi,
  .vm,
  .il {
    background: transparent !important;
    background-color: transparent !important;
  }
}

/* Remover backgrounds do highlighter-rouge do Minima */
.highlighter-rouge {
  background: transparent !important;
  
  .highlight {
    background: transparent !important;
    background-color: transparent !important;
  }
  
  .highlight pre,
  pre {
    background: var(--color-code-block-bg) !important;
    background-color: var(--color-code-block-bg) !important;
  }
  
  .highlight *,
  .highlight pre * {
    background: transparent !important;
    background-color: transparent !important;
  }
}

body {
  font-family: $font-family;
  font-size: $font-size-base;
  line-height: 1.6;
  color: var(--color-text-primary);
  background: var(--color-bg-primary);
  margin: 0;
  padding: 0;
  @include theme-transition-all;
}

.site-header {
  background: var(--color-primary);
  color: var(--color-text-inverse);
  padding: $spacing-md $spacing-lg;
  box-shadow: var(--color-shadow-sm);
  position: sticky;
  top: 0;
  z-index: 1000;
  @include theme-transition-all;
  
  .header-content {
    max-width: $container-max-width;
    margin: 0 auto;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  
  .site-title {
    margin: 0;
    font-size: $font-size-h2;
    
    a {
      color: var(--color-text-inverse);
      text-decoration: none;
    }
  }
  
  .main-nav {
    display: flex;
    gap: $spacing-lg;
    align-items: center;
    
    a {
      color: var(--color-text-inverse);
      text-decoration: none;
      
      &:hover {
        text-decoration: underline;
      }
    }
  }
  
  .theme-toggle {
    background: transparent;
    border: none;
    color: var(--color-text-inverse);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    padding: $spacing-xs;
    margin-left: $spacing-md;
    transition: opacity 0.2s, transform 0.2s;
    
    &:hover {
      opacity: 0.8;
      transform: scale(1.1);
    }
    
    &:active {
      transform: scale(0.95);
    }
    
    &:focus {
      outline: 2px solid rgba(255, 255, 255, 0.5);
      outline-offset: 2px;
      border-radius: 4px;
    }
    
    #theme-icon {
      display: inline-block;
      line-height: 1;
    }
  }
}

.page-wrapper {
  display: flex !important;
  flex-direction: row !important;
  align-items: flex-start !important;
  width: 100% !important;
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

.sidebar {
  flex: 0 0 $sidebar-width !important;
  width: $sidebar-width !important;
  min-width: $sidebar-width !important;
  max-width: $sidebar-width !important;
  position: sticky !important;
  top: 80px;
  height: calc(100vh - 80px);
  overflow-y: auto;
  overflow-x: hidden;
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

.main-container {
  flex: 1 1 auto !important;
  display: flex !important;
  justify-content: center !important;
  align-items: flex-start !important;
  min-width: 0;
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

.main-container .content-wrapper {
  width: 100%;
  max-width: $container-max-width;
  overflow: hidden;
  position: relative;
}

.main-container .content {
  max-width: $container-max-width;
  width: 100%;
  padding: $spacing-lg;
  box-sizing: border-box;
  zoom: 0.8;
  padding-bottom: $spacing-lg;
  display: block;
  
  > *:last-child {
    margin-bottom: 0 !important;
  }
  
  .exercises {
    margin-bottom: 0 !important;
    padding-bottom: 0 !important;
    
    > *:last-child {
      margin-bottom: 0 !important;
    }
  }
  
  section:last-child,
  .exercises:last-child,
  nav:last-child,
  .lesson-navigation:last-child {
    margin-bottom: 0 !important;
    padding-bottom: 0 !important;
  }
  
  article:last-child,
  .lesson-content:last-child {
    margin-bottom: 0 !important;
    padding-bottom: 0 !important;
  }
  
  .lesson-actions {
    margin-bottom: 0 !important;
    padding-bottom: 0 !important;
  }
}

.container {
  max-width: $container-max-width;
  margin: 0 auto;
  display: flex;
  padding: $spacing-lg;
  gap: $spacing-xl;
}

.content {
  flex: 1;
  min-width: 0;
  
  h1, h2, h3, h4, h5, h6 {
    color: var(--color-text-primary);
    @include theme-transition(color);
  }
  
  p {
    color: var(--color-text-primary);
    @include theme-transition(color);
  }
  
  a {
    color: var(--color-primary);
    @include theme-transition(color);
    
    &:hover {
      color: var(--color-primary-hover);
    }
  }
  
  code {
    background: var(--color-code-bg);
    color: var(--color-code-text);
    padding: 0.2em 0.4em;
    border-radius: 3px;
    font-size: 0.9em;
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;
    @include theme-transition-all;
  }
  
  /* Estilos para containers de highlight do Jekyll/Minima */
  .highlighter-rouge {
    background: transparent !important;
    
    .highlight {
      background: transparent !important;
      background-color: transparent !important;
    }
  }
  
  pre {
    background: var(--color-code-block-bg) !important;
    color: var(--color-text-primary) !important;
    padding: $spacing-md;
    border-radius: 8px;
    overflow: hidden;
    overflow-x: auto;
    border: 1px solid var(--color-code-block-border) !important;
    margin: $spacing-lg 0;
    @include theme-transition-all;
    
    code {
      background: transparent !important;
      color: var(--color-text-primary) !important;
      padding: 0;
      font-size: 0.9em;
      border: none;
      display: block;
    }
    
    /* Remover todos os backgrounds de elementos de syntax highlighting */
    * {
      background: transparent !important;
      background-color: transparent !important;
    }
    
    /* Garantir que spans de highlight não tenham background */
    span,
    .hll,
    .err,
    .k,
    .o,
    .c,
    .cm,
    .cp,
    .c1,
    .cs,
    .gd,
    .ge,
    .gr,
    .gh,
    .gi,
    .go,
    .gp,
    .gs,
    .gu,
    .gt,
    .kc,
    .kd,
    .kn,
    .kp,
    .kr,
    .kt,
    .ld,
    .m,
    .s,
    .na,
    .nb,
    .nc,
    .no,
    .nd,
    .ni,
    .ne,
    .nf,
    .nl,
    .nn,
    .nx,
    .py,
    .nt,
    .nv,
    .ow,
    .w,
    .mb,
    .mf,
    .mh,
    .mi,
    .mo,
    .sa,
    .sb,
    .sc,
    .dl,
    .sd,
    .s2,
    .se,
    .sh,
    .si,
    .sx,
    .sr,
    .s1,
    .ss,
    .bp,
    .fm,
    .vc,
    .vg,
    .vi,
    .vm,
    .il {
      background: transparent !important;
      background-color: transparent !important;
      color: inherit;
    }
  }
  
  /* Garantir que .highlight dentro de .highlighter-rouge não tenha background */
  .highlighter-rouge .highlight,
  .highlighter-rouge .highlight pre,
  .highlighter-rouge pre {
    background: var(--color-code-block-bg) !important;
    background-color: var(--color-code-block-bg) !important;
  }
  
  .highlighter-rouge .highlight *,
  .highlighter-rouge .highlight pre * {
    background: transparent !important;
    background-color: transparent !important;
  }
  
  /* Garantir que pre dentro de qualquer contexto use as cores corretas */
  .lesson-content pre,
  .module-content pre,
  .exercise-content pre,
  .content pre {
    background: var(--color-code-block-bg) !important;
    color: var(--color-text-primary) !important;
    border-color: var(--color-code-block-border) !important;
  }
  
  blockquote {
    border-left: 4px solid var(--color-primary);
    padding-left: $spacing-md;
    margin-left: 0;
    margin-right: 0;
    color: var(--color-text-secondary);
    background: var(--color-bg-secondary);
    padding-top: $spacing-sm;
    padding-bottom: $spacing-sm;
    padding-right: $spacing-md;
    border-radius: 0 4px 4px 0;
    @include theme-transition-all;
  }
  
  table {
    width: 100%;
    border-collapse: collapse;
    margin: $spacing-lg 0;
    
    th, td {
      padding: $spacing-sm $spacing-md;
      border: 1px solid var(--color-border);
      @include theme-transition(border-color);
    }
    
    th {
      background: var(--color-bg-secondary);
      color: var(--color-text-primary);
      font-weight: 600;
      @include theme-transition-all;
    }
    
    td {
      background: var(--color-surface);
      color: var(--color-text-primary);
      @include theme-transition-all;
    }
    
    tr:nth-child(even) td {
      background: var(--color-bg-secondary);
    }
  }
  
  ul, ol {
    color: var(--color-text-primary);
    @include theme-transition(color);
  }
  
  hr {
    border: none;
    border-top: 1px solid var(--color-border);
    margin: $spacing-xl 0;
    @include theme-transition(border-color);
  }
  
  img {
    max-width: 100%;
    height: auto;
    border-radius: 4px;
    @include theme-transition-all;
    
    &[src*="visualizacao"],
    &[src*="visualization"],
    &[src*="diagram"],
    &[src*="diagrama"] {
      background: var(--color-surface);
      padding: $spacing-md;
      border: 1px solid var(--color-border);
      @include theme-transition-all;
    }
  }
  
  /* Containers de visualização e diagramas */
  .visualizacao,
  .visualization,
  .diagram,
  .diagrama {
    background: var(--color-visualization-bg);
    border: 1px solid var(--color-visualization-border);
    border-radius: 8px;
    padding: $spacing-lg;
    margin: $spacing-lg 0;
    color: var(--color-text-primary);
    @include theme-transition-all;
    
    img {
      background: transparent;
      border: none;
      padding: 0;
    }
    
    p, div, span {
      color: var(--color-text-primary);
    }
  }
  
  /* Seções com conteúdo que pode ter imagens brancas */
  section,
  div[class*="visual"],
  div[class*="diagram"] {
    img {
      /* Aplicar filtro sutil no dark mode para melhorar contraste */
      [data-theme="dark"] & {
        opacity: 0.9;
      }
    }
  }
}

.lesson-content,
.module-content,
.exercise-content {
  background: var(--color-surface);
  color: var(--color-text-primary);
  padding: $spacing-xl;
  border-radius: 8px;
  box-shadow: var(--color-shadow-sm);
  @include theme-transition-all;
  
  header {
    margin-bottom: $spacing-xl;
    padding-bottom: $spacing-lg;
    border-bottom: 2px solid var(--color-border);
    @include theme-transition(border-color);
    
    h1 {
      margin: 0 0 $spacing-md 0;
      font-size: $font-size-h1;
      color: var(--color-text-primary);
      @include theme-transition(color);
    }
    
    .lesson-meta,
    .module-meta,
    .exercise-meta {
      display: flex;
      gap: $spacing-lg;
      color: var(--color-text-secondary);
      font-size: $font-size-small;
      margin-top: $spacing-sm;
      @include theme-transition(color);
    }
  }
}

.lesson-navigation {
  margin: $spacing-xl 0 0 0;
  padding: $spacing-lg;
  background: var(--color-bg-secondary);
  border-radius: 8px;
  display: flex;
  justify-content: space-between;
  @include theme-transition(background-color);
  
  a {
    color: var(--color-primary);
    text-decoration: none;
    font-weight: bold;
    @include theme-transition(color);
    
    &:hover {
      text-decoration: underline;
    }
  }
}

.exercises {
  margin-top: $spacing-xl;
  margin-bottom: 0;
  padding-bottom: 0;
  
  h2 {
    font-size: $font-size-h2;
    margin-bottom: $spacing-lg;
  }
  
  .exercise-card {
    background: var(--color-surface);
    color: var(--color-text-primary);
    padding: $spacing-lg;
    border: 1px solid var(--color-border);
    border-radius: 8px;
    margin-bottom: $spacing-md;
    @include theme-transition-all;
    
    h3 {
      margin: 0 0 $spacing-sm 0;
      font-size: $font-size-h3;
      color: var(--color-text-primary);
    }
    
    a {
      color: var(--color-primary);
      text-decoration: none;
      @include theme-transition(color);
      
      &:hover {
        text-decoration: underline;
      }
    }
  }
}

.lesson-actions {
  margin-top: $spacing-xl;
  padding-top: $spacing-lg;
  border-top: 1px solid var(--color-border);
  @include theme-transition(border-color);
  
  .mark-lesson-complete {
    background: var(--color-success);
    color: var(--color-text-inverse);
    border: none;
    padding: $spacing-sm $spacing-lg;
    border-radius: 4px;
    font-size: $font-size-base;
    cursor: pointer;
    transition: background-color 0.2s;
    
    &:hover {
      background: var(--color-success-hover);
    }
    
    &:disabled {
      background: var(--color-text-tertiary);
      cursor: not-allowed;
    }
  }
}

.site-footer {
  background: var(--color-secondary);
  color: var(--color-text-inverse);
  padding: $spacing-lg;
  margin-top: $spacing-xl;
  text-align: center;
  @include theme-transition(background-color);
  
  [data-theme="dark"] & {
    background: var(--color-surface-elevated);
  }
  
  .footer-content {
    max-width: $container-max-width;
    margin: 0 auto;
  }
}

@media (max-width: $breakpoint-tablet) {
  .page-wrapper {
    flex-direction: column;
  }
  
  .sidebar {
    width: 100%;
    position: relative;
    top: 0;
    height: auto;
    align-self: stretch;
  }
  
  .sidebar-navigation {
    height: auto;
  }
  
  .main-container .content-wrapper {
    overflow: visible;
  }
  
  .main-container .content {
    zoom: 1;
  }
  
  .container {
    flex-direction: column;
    padding: $spacing-md;
  }
  
  .lesson-content,
  .module-content,
  .exercise-content {
    padding: $spacing-lg;
  }
  
  .site-header {
    .header-content {
      flex-direction: column;
      gap: $spacing-md;
    }
  }
}

@media (max-width: $breakpoint-mobile) {
  .lesson-content,
  .module-content,
  .exercise-content {
    header h1 {
      font-size: $font-size-h2;
    }
  }
}

