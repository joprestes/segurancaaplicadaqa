{% if include.video %}
<hr />
<div class="video-player" id="video-player">
  <div class="video-info">
    <h3>{{ include.video.title }}</h3>
    <p class="video-description" id="video-description-{{ include.lesson_id }}">{{ include.video.description }}</p>
  </div>
  
  <div class="video-container">
      <video 
      id="video-element" 
      controls 
      preload="none" 
      src="{{ include.video.file | relative_url }}" 
      class="responsive-media"
      aria-label="{{ include.video.title | default: 'Vídeo da aula' }}"
      aria-describedby="video-description-{{ include.lesson_id }}">
      Seu navegador não suporta o elemento de vídeo.
    </video>
  </div>
  
  <div class="player-controls">
    <div class="time-display">
      <span id="video-current-time">0:00</span><span> / </span><span id="video-duration">0:00</span>
    </div>
    
    <div class="speed-control">
      <label for="video-speed" id="video-speed-label">
        Velocidade de reprodução
        <span class="sr-only">(use as setas do teclado para ajustar)</span>
      </label>
      <select 
        id="video-speed" 
        data-testid="video-speed-select" 
        aria-labelledby="video-speed-label"
        aria-describedby="video-speed-desc">
        <option value="0.5">0.5x</option>
        <option value="0.75">0.75x</option>
        <option value="1" selected>1x</option>
        <option value="1.25">1.25x</option>
        <option value="1.5">1.5x</option>
        <option value="2">2x</option>
      </select>
      <span id="video-speed-desc" class="sr-only">Ajuste a velocidade de reprodução do vídeo</span>
    </div>
    
    <div class="volume-control">
      <label for="video-volume" id="video-volume-label">
        Volume
        <span class="sr-only">(use as setas do teclado ou arraste para ajustar)</span>
      </label>
      <input 
        type="range" 
        id="video-volume" 
        data-testid="video-volume-slider" 
        min="0" 
        max="100" 
        value="100" 
        aria-labelledby="video-volume-label"
        aria-describedby="video-volume-desc">
      <span id="video-volume-desc" class="sr-only">Ajuste o volume do vídeo de 0 a 100 por cento</span>
    </div>
  </div>
</div>


<div id="video-indicator" class="video-playing-indicator" aria-live="polite" aria-label="Vídeo sendo reproduzido">
  Reproduzindo
</div>



{% endif %}

<script type="application/json" id="video-data">
{
  "videoFile": {% if include.video %}"{{ include.video.file | relative_url }}"{% else %}null{% endif %},
  "lessonId": "{{ include.lesson_id }}",
  "videoTitle": {% if include.video %}"{{ include.video.title }}"{% else %}null{% endif %},
  "videoDescription": {% if include.video %}"{{ include.video.description }}"{% else %}null{% endif %},
  "videoThumbnail": {% if include.video and include.video.thumbnail %}"{{ include.video.thumbnail | relative_url }}"{% else %}null{% endif %}
}
</script>

<script type="application/json" id="lessons-videos-data">
[
  {% for lesson in site.data.lessons.lessons %}
    {% if lesson.video %}
      {
        "id": "{{ lesson.id }}",
        "title": "{{ lesson.title }}",
        "order": {{ lesson.order }},
        "module": "{{ lesson.module }}",
        "videoFile": "{{ lesson.video.file }}"
      }{% unless forloop.last %},{% endunless %}
    {% endif %}
  {% endfor %}
]
</script>

